## å­¦ä¹ èµ„æ–™
- [Custom Components In Five Minutes](https://www.gradio.app/guides/custom-components-in-five-minutes)

- [ä¸€æ–‡ææ‡‚æ¨¡å‹å±•ç¤ºå·¥å…·Gradioçš„æ‰€æœ‰åŠŸèƒ½ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/679668818)

- [Gradioå…¥é—¨è¯¦ç»†æ•™ç¨‹_gradioæ•™ç¨‹-CSDNåšå®¢](https://blog.csdn.net/weixin_45277161/article/details/134998849)


## ç¤ºä¾‹ä»£ç 

```python
#%%
import os 
import gradio as gr

# %%
with gr.Blocks() as demo: 
    title = """
    <div style="text-align: center;">
    <h1>ğŸ’» Intership: Learning Gradio Component </h1> 
    </div>
    """

    gr.HTML(title)

    
def greet(name):
    return "Hello " + name + "!"

demo = gr.Interface(
    fn=greet, 
    inputs="textbox", 
    outputs="textbox"
    #å¯ä»¥åŠ titleï¼Œdescriptionæ¥å®Œæˆæ ‡é¢˜å’Œæ¦‚è¿°çš„ç¼–å†™
)



## ç¡®ä¿ç¨‹åºåœ¨5009ç«¯å£ä½¿ç”¨
if __name__ == "__main__":
    demo.launch(
        server_name='0.0.0.0',
        server_port=5009,
        show_api=False,
        share=False,
        allowed_paths=['assets'])
```

# æµ‹è¯•åœ°å€ï¼š
- http://aigc-wenxin:5009


## æ¼”ç¤ºå‘½ä»¤

```bash
[jnw@PPSE1LLM143 ~]$ conda info -e
# conda environments:
#
intership             *  /home/jnw/.conda/envs/intership
base                     /opt/miniconda3
ChuanhuChat              /opt/miniconda3/envs/ChuanhuChat
dbgpt_hub_lc             /opt/miniconda3/envs/dbgpt_hub_lc
test02                   /opt/miniconda3/envs/test02
testLangChain            /opt/miniconda3/envs/testLangChain
visgpu                   /opt/miniconda3/envs/visgpu
wenxin-doc               /opt/miniconda3/envs/wenxin-doc

[jnw@PPSE1LLM143 ~]$ conda activate intership
(intership)[jnw@PPSE1LLM143 ~]$ cd Projetcs/
(intership)[jnw@PPSE1LLM143 Projetcs]$ python test_gradio1.py 
Running on local URL:  http://0.0.0.0:5009

To create a public link, set `share=True` in `launch()`.           
è¿›å…¥æ–‡ä»¶å¤¹cd <path>,è¿”å›cd
```

## ç»„ä»¶ç¤ºä¾‹

### è¾“å…¥ç»„ä»¶

1. *Audio*        
   å…è®¸ç”¨æˆ·ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶æˆ–ç›´æ¥å½•éŸ³ã€‚å‚æ•°ï¼šsource: æŒ‡å®šéŸ³é¢‘æ¥æºï¼ˆå¦‚éº¦å…‹é£ï¼‰ã€type: æŒ‡å®šè¿”å›ç±»å‹ã€‚   
    **ç¤ºä¾‹ï¼šgr.Audio(source="microphone", type="filepath")**       
2. *Checkbox*        
   æä¾›å¤é€‰æ¡†ï¼Œç”¨äºå¸ƒå°”å€¼è¾“å…¥ã€‚å‚æ•°ï¼šlabel: æ˜¾ç¤ºåœ¨å¤é€‰æ¡†æ—è¾¹çš„æ–‡æœ¬æ ‡ç­¾ã€‚  
    **ç¤ºä¾‹ï¼šgr.Checkbox(label="åŒæ„æ¡æ¬¾")**          
3. *CheckboxGroup*            
   å…è®¸ç”¨æˆ·ä»ä¸€ç»„é€‰é¡¹ä¸­é€‰æ‹©å¤šä¸ªã€‚å‚æ•°ï¼šchoices: å­—ç¬¦ä¸²æ•°ç»„ï¼Œè¡¨ç¤ºå¤é€‰æ¡†çš„é€‰é¡¹ã€label: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.CheckboxGroup(["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"], label="é€‰æ‹©ä½ çš„å…´è¶£")**          
4. *ColorPicker*             
   ç”¨äºé€‰æ‹©é¢œè‰²ï¼Œé€šå¸¸è¿”å›åå…­è¿›åˆ¶é¢œè‰²ä»£ç ã€‚å‚æ•°ï¼šdefault: é»˜è®¤é¢œè‰²å€¼ã€‚  
    **ç¤ºä¾‹ï¼šgr.ColorPicker(default="#ff0000")**     
5. *Dataframe*               
   å…è®¸ç”¨æˆ·ä¸Šä¼ CSVæ–‡ä»¶æˆ–è¾“å…¥DataFrameã€‚å‚æ•°ï¼šheaders: åˆ—æ ‡é¢˜æ•°ç»„ã€row_count: åˆå§‹æ˜¾ç¤ºçš„è¡Œæ•°ã€‚  
    **ç¤ºä¾‹ï¼šgr.Dataframe(headers=["åˆ—1", "åˆ—2"], row_count=5)**      
6. *Dropdown*               
   ä¸‹æ‹‰èœå•ï¼Œç”¨æˆ·å¯ä»¥ä»ä¸­é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚å‚æ•°ï¼šchoices: å­—ç¬¦ä¸²æ•°ç»„ï¼Œè¡¨ç¤ºä¸‹æ‹‰èœå•çš„é€‰é¡¹ã€label: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Dropdown(["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"], label="é€‰æ‹©ä¸€ä¸ªé€‰é¡¹")**     
7. *File*                   
    ç”¨äºä¸Šä¼ ä»»æ„æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ã€‚å‚æ•°ï¼šfile_count: å…è®¸ä¸Šä¼ çš„æ–‡ä»¶æ•°é‡ï¼Œå¦‚"single"æˆ–"multiple"ã€type: è¿”å›çš„æ•°æ®ç±»å‹ï¼Œå¦‚"file"æˆ–"auto"ã€‚  
    **ç¤ºä¾‹ï¼šgr.File(file_count="single", type="file")**      
8. *Image*                      
    ç”¨äºä¸Šä¼ å›¾ç‰‡ï¼Œæ”¯æŒå¤šç§å›¾åƒæ ¼å¼ã€‚å‚æ•°ï¼štypeå›¾åƒç±»å‹ï¼Œå¦‚pilã€‚  
    **ç¤ºä¾‹ï¼šgr.Image(type='pil')**       
9. *Number*                    
    æ•°å­—è¾“å…¥æ¡†ï¼Œé€‚ç”¨äºæ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚å‚æ•°ï¼šdefault: é»˜è®¤æ•°å­—ã€label: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Number(default=0, label="è¾“å…¥ä¸€ä¸ªæ•°å­—")**      
10. *Radio*                 
    å•é€‰æŒ‰é’®ç»„ï¼Œç”¨æˆ·ä»ä¸­é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚å‚æ•°ï¼šchoices: å­—ç¬¦ä¸²æ•°ç»„ï¼Œè¡¨ç¤ºå•é€‰æŒ‰é’®çš„é€‰é¡¹ã€label: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Radio(["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"], label="é€‰æ‹©ä¸€ä¸ªé€‰é¡¹")**     
11. *Slider*        
    æ»‘åŠ¨æ¡ï¼Œç”¨äºé€‰æ‹©ä¸€å®šèŒƒå›´å†…çš„æ•°å€¼ã€‚å‚æ•°ï¼šminimum: æœ€å°å€¼ã€maximum: æœ€å¤§å€¼ã€step: æ­¥é•¿ã€label: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Slider(minimum=0, maximum=10, step=1, label="è°ƒæ•´æ•°å€¼")**       
12. *Textbox*                   
    å•è¡Œæ–‡æœ¬è¾“å…¥æ¡†ï¼Œé€‚ç”¨äºç®€çŸ­æ–‡æœ¬ã€‚å‚æ•°ï¼šdefault: é»˜è®¤æ–‡æœ¬ã€placeholder: å ä½ç¬¦æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Textbox(default="é»˜è®¤æ–‡æœ¬", placeholder="è¾“å…¥æ–‡æœ¬")**       
13. *Textarea*                           
    å¤šè¡Œæ–‡æœ¬è¾“å…¥åŒºåŸŸï¼Œé€‚åˆè¾ƒé•¿çš„æ–‡æœ¬è¾“å…¥ã€‚å‚æ•°ï¼šlines: æ˜¾ç¤ºè¡Œæ•°ã€placeholder: å ä½ç¬¦æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Textarea(lines=4, placeholder="è¾“å…¥é•¿æ–‡æœ¬")**        
14. *Time*                      
    ç”¨äºè¾“å…¥æ—¶é—´ã€‚å‚æ•°ï¼šlabel: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Time(label="é€‰æ‹©æ—¶é—´")**        
15. *Video*                         
    è§†é¢‘ä¸Šä¼ ç»„ä»¶ï¼Œæ”¯æŒå¤šç§è§†é¢‘æ ¼å¼ã€‚å‚æ•°ï¼šlabel: æ ‡ç­¾æ–‡æœ¬ã€‚  
    **ç¤ºä¾‹ï¼šgr.Video(label="ä¸Šä¼ è§†é¢‘")**              
16. *Data*           
    ç”¨äºä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒæˆ–éŸ³é¢‘çš„åŸå§‹å­—èŠ‚ã€‚å‚æ•°ï¼štype: æ•°æ®ç±»å‹ï¼Œå¦‚"auto"è‡ªåŠ¨æ¨æ–­ã€‚  
    **ç¤ºä¾‹ï¼šgr.Data(type="auto", label="ä¸Šä¼ æ•°æ®")**        


### è¾“å‡ºç»„ä»¶


1. *Audio*  
    æ’­æ”¾éŸ³é¢‘æ–‡ä»¶ã€‚å‚æ•°ï¼štype æŒ‡å®šè¾“å‡ºæ ¼å¼ã€‚            
    **ç¤ºä¾‹ï¼šgr.Audio(type="auto")**
2. *Carousel*  
    ä»¥è½®æ’­æ–¹å¼å±•ç¤ºå¤šä¸ªè¾“å‡ºï¼Œé€‚ç”¨äºå›¾åƒé›†æˆ–å¤šä¸ªæ•°æ®ç‚¹ã€‚å‚æ•°ï¼šitem_type è®¾ç½®è½®æ’­é¡¹ç›®ç±»å‹ã€‚       
    **ç¤ºä¾‹ï¼šgr.Carousel(item_type="image")**
3. *Dataframe*   
    å±•ç¤ºPandas DataFrameï¼Œé€‚ç”¨äºè¡¨æ ¼æ•°æ®ã€‚å‚æ•°ï¼štype æŒ‡å®šè¿”å›çš„DataFrameç±»å‹ã€‚     
    **ç¤ºä¾‹ï¼šgr.Dataframe(type="pandas")**
4. *Gallery*   
    ä»¥ç”»å»Šå½¢å¼å±•ç¤ºä¸€ç³»åˆ—å›¾åƒã€‚
5. *HTML*   
    å±•ç¤ºHTMLå†…å®¹ï¼Œé€‚ç”¨äºå¯Œæ–‡æœ¬æˆ–ç½‘é¡µå¸ƒå±€ã€‚
6. *Image*  
    å±•ç¤ºå›¾åƒã€‚å‚æ•°ï¼štype æŒ‡å®šå›¾åƒæ ¼å¼ã€‚          
    **ç¤ºä¾‹ï¼šgr.Image(type="pil")**
7. *JSON*  
    ä»¥JSONæ ¼å¼å±•ç¤ºæ•°æ®ï¼Œä¾¿äºæŸ¥çœ‹ç»“æ„åŒ–æ•°æ®ã€‚
8. *KeyValues*  
    ä»¥é”®å€¼å¯¹å½¢å¼å±•ç¤ºæ•°æ®ã€‚
9. *Label*  
    å±•ç¤ºæ–‡æœ¬æ ‡ç­¾ï¼Œé€‚ç”¨äºç®€å•çš„æ–‡æœ¬è¾“å‡ºã€‚
10. *Markdown*  
    æ”¯æŒMarkdownæ ¼å¼çš„æ–‡æœ¬å±•ç¤ºã€‚
11. *Plot*  
    å±•ç¤ºå›¾è¡¨ï¼Œå¦‚matplotlibç”Ÿæˆçš„å›¾è¡¨ã€‚
12. *Text*  
    ç”¨äºæ˜¾ç¤ºæ–‡æœ¬ï¼Œé€‚åˆè¾ƒé•¿çš„è¾“å‡ºã€‚
13. *Video*  
    æ’­æ”¾è§†é¢‘æ–‡ä»¶ã€‚



## Condaç¯å¢ƒæŸ¥çœ‹ã€æ¿€æ´»ä¸æ¨å‡º
```bash
(intership)[jnw@PPSE1LLM143 Projetcs]$ conda activate intership
(intership)[jnw@PPSE1LLM143 Projetcs]$ conda info -e
# conda environments:
#
intership             *  /home/jnw/.conda/envs/intership
base                     /opt/miniconda3
ChuanhuChat              /opt/miniconda3/envs/ChuanhuChat
dbgpt_hub_lc             /opt/miniconda3/envs/dbgpt_hub_lc
test02                   /opt/miniconda3/envs/test02
testLangChain            /opt/miniconda3/envs/testLangChain
visgpu                   /opt/miniconda3/envs/visgpu
wenxin-doc               /opt/miniconda3/envs/wenxin-doc

(intership)[jnw@PPSE1LLM143 Projetcs]$ conda deactivate
[jnw@PPSE1LLM143 Projetcs]$ conda activate intership
```

## GLM-4æ¨¡å‹
æœ¬ä½“åœ¨basic_demoä¸­ï¼Œå¯¹äºgradioé…ç½®çš„ç½‘é¡µç«¯æ–‡ä»¶ï¼š*trans_web_demo*ï¼Œé…ç½®ç½‘è·¯ç«¯å£åï¼Œå¯ç”¨çƒ­é‡è½½æ¨¡å¼è¿è¡Œ
**å¯¹äºå…¶ä¸­æ¨¡å‹finetuneï¼Œå¯ä»¥é€‰ç”¨è‡ªå¸¦çš„loraï¼Œä½†ç”±äºllamaå¯è§†åŒ–ä¼˜ç‚¹æˆ‘ä¼šé€‰æ‹©ä½¿ç”¨å®ƒã€‚**

### å…³äºLLaMAå¯è§†åŒ–ç½‘é¡µé…ç½®æ‰€æ¶‰åŠçš„åŸŸåä¿®æ”¹        
éœ€è¦åˆ°main/src/llamafactory/webuiä¸­æ‰¾åˆ°interface.py , å¹¶ä¿®æ”¹æœ€åä¸¤éƒ¨åˆ†ä¸­çš„servernameä»¥åŠserverportï¼š     
```bash
def run_web_ui() -> None:
    gradio_share = os.environ.get("GRADIO_SHARE", "0").lower() in ["true", "1"]
    server_name = os.environ.get("GRADIO_SERVER_NAME", "0.0.0.0")
    create_ui().queue().launch(share=gradio_share, server_name=server_name, server_port=5009, inbrowser=True)


def run_web_demo() -> None:
    gradio_share = os.environ.get("GRADIO_SHARE", "0").lower() in ["true", "1"]
    server_name = os.environ.get("GRADIO_SERVER_NAME", "0.0.0.0")
    create_web_demo().queue().launch(share=gradio_share, server_name=server_name, server_port=5009, inbrowser=True)
```
### å…³äºjsonæ–‡ä»¶        
æ¢è¡Œæ˜¯\n,é”®å€¼å¯¹ï¼Œå€¼çš„æ ¼å¼è·Ÿcä¸€æ ·     
æ˜¯ç”¨äºå‚¨å­˜æ•°æ®çš„     
æ ¼å¼ä¸º:     
[     
  {              
  ""="",              
  ""="",              
  ""=""              
  },               
  â€¦â€¦               
]


## the fuzz æ¨¡ç³ŠåŒ¹é…   

**>>> from fuzzywuzzy import fuzz**            
**>>> from fuzzywuzzy import process**         
```shell

[1]>>> fuzz.ratio("this is a test", "this is a test!")
out    97
æ˜¯å¯¹å­—æ®µçš„å…¨åŒ¹é…

[2]>>> fuzz.partial_ratio("this is a test", "this is a test!")
out    100
æ˜¯å¯¹å­—æ®µçš„æ¨¡ç³ŠåŒ¹é…

```
---
```shell

[3]>>> fuzz._process_and_sort(s, force_ascii, full_process=True)
å¯¹å­—ç¬¦ä¸²sæ’åº

force_ascii(TF)
T è½¬æ¢ä¸ºasciiç 

full_process(TF)
T å°†sè½¬å°å†™ï¼Œå»é™¤å­—æ¯å’Œæ•°å­—ä»¥å¤–å­—ç¬¦ï¼ˆä¸åŒ…å«-ï¼‰ï¼Œå‰©ä¸‹å­—ç¬¦ä¸²ç”¨spaceåˆ†å‰²ï¼Œå†è¿›è¡Œæ’åºã€‚
F ç›´æ¥å¯¹sæ’åº


[4]>>> fuzz._token_sort(s1, s2, partial=True, force_ascii=True, full_process=True)
ç»™å‡ºs1,s2ä¸¤è€…ç›¸ä¼¼åº¦

æ˜¯é¦–å…ˆå‡½æ•°[3]å¤„ç†c,
å½“partial ä¸ºT æ—¶ï¼Œå†å‡½æ•°[2]å¤„ç†ï¼›
å½“partial ä¸ºF æ—¶ï¼Œå†å‡½æ•°[1]å¤„ç†ã€‚



[5]>>> fuzz.token_sort_ratio("fuzzy wuzzy was a bear", "wuzzy fuzzy was a bear")
out    100
partial=F æ—¶çš„å‡½æ•°[4];



[6]>>> fuzz.partial_token_sort_ratio(s1, s2, force_ascii=True, full_process=True)
partial=T æ—¶çš„å‡½æ•°[4]
```
---

```shell

[7]>>> fuzz.token_set_ratio("fuzzy was a bear", "fuzzy fuzzy was a bear")
out    100
è¾ƒå‡½æ•°[5]å¿½ç•¥äº†é‡å¤å•è¯


[8]>>>fuzz._token_set(s1, s2, partial=True, force_ascii=True, full_process=True)
å½“partial= F æ—¶ï¼Œä¸å‡½æ•°[7]ç›¸åŒ


[9]>>>fuzz.partial_token_set_ratio(s1, s2, force_ascii=True, full_process=True)
å½“partial= T æ—¶ï¼Œä¸å‡½æ•°[8]ç›¸åŒ
```
---
```shell























